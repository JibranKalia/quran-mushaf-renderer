<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quran Page <%= @page_data.page_number %></title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Font definitions for different mushaf versions */
    @font-face {
      font-family: 'p<%= @page_data.page_number %>-v1';
      src: local(QCF_P<%= @page_data.page_number.to_s.rjust(3, '0') %>),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v1-optimized/woff2/p<%= @page_data.page_number %>.woff2?v=3.1') format('woff2'),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v1-optimized/woff/p<%= @page_data.page_number %>.woff?v=3.1') format('woff');
      font-display: swap;
    }
    
    @font-face {
      font-family: 'p<%= @page_data.page_number %>-v2';
      src: local(QCF<%= '2' + @page_data.page_number.to_s.rjust(3, '0') %>),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v2/woff2/p<%= @page_data.page_number %>.woff2?v=3.1') format('woff2'),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v2/woff/p<%= @page_data.page_number %>.woff?v=3.1') format('woff');
      font-display: swap;
    }
    
    @font-face {
      font-family: 'p<%= @page_data.page_number %>-indopak';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/indopak/woff2/p<%= @page_data.page_number %>.woff2?v=3.1') format('woff2');
      font-display: swap;
    }

    @font-face {
      font-family: 'bismillah';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/bismillah/bismillah.woff2?v=3.3') format('woff2');
      font-display: swap;
    }

    @font-face {
      font-family: 'surah-names-v4';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/surah-names/v4/surah-name-v4.ttf?v=3.3') format('truetype');
      font-display: swap;
    }

    @font-face {
      font-family: 'quran-icon';
      src: url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.woff2?v=3.3") format('woff2'),
           url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.woff?v=3.3") format("woff"),
           url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.ttf?v=3.3") format("truetype");
      font-display: swap;
    }

    /* Custom Quran-specific styles that can't be replaced with Tailwind */
    .mushaf.qpc_v1 .page { font-family: 'p<%= @page_data.page_number %>-v1'; }
    .mushaf.qpc_v2 .page { font-family: 'p<%= @page_data.page_number %>-v2'; }
    .mushaf.indopak_nastaleeq_15 .page { font-family: 'p<%= @page_data.page_number %>-indopak'; }
    
    .page {
      unicode-bidi: embed;
      text-align: justify;
      text-align-last: justify;
    }
    
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
      .page {
        font-size: 1.25rem !important; /* Override inline styles on mobile */
        line-height: 1.75 !important;
      }
      
      .line {
        white-space: normal; /* Allow text wrapping on mobile */
      }
      
      .surah-header {
        font-size: 50px !important;
        margin-top: -20px;
        margin-bottom: -20px;
      }
    }
    
    .line {
      text-align: justify;
      text-align-last: justify;
      white-space: nowrap;
    }
    
    .line--center {
      text-align: center !important;
      text-align-last: center !important;
    }
    
    .ayah-container, .ayah, .char {
      display: inline;
    }
    
    .quran-icon {
      font-family: 'quran-icon';
    }
    
    .surah-name-v4-icon {
      font-family: 'surah-names-v4';
    }
    
    .bismillah-font {
      font-family: 'bismillah';
    }
    
    .surah-header {
      font-size: 70px;
      margin-top: -30px;
      margin-bottom: -30px;
    }
  </style>
</head>
<body class="bg-gray-100 p-2 sm:p-5">
  <%= yield %>
</body>
</html>
