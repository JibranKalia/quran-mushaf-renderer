<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Quran Page <%= @page_number %></title>
  <style>
    /* Font definitions for different mushaf versions */
    @font-face {
      font-family: 'p<%= @page_number %>-v1';
      src: local(QCF_P<%= @page_number.to_s.rjust(3, '0') %>),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v1-optimized/woff2/p<%= @page_number %>.woff2?v=3.1') format('woff2'),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v1-optimized/woff/p<%= @page_number %>.woff?v=3.1') format('woff');
      font-display: swap;
    }
    
    @font-face {
      font-family: 'p<%= @page_number %>-v2';
      src: local(QCF<%= @page_number.to_s.rjust(4, '0') %>),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v2/woff2/p<%= @page_number %>.woff2?v=3.1') format('woff2'),
           url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/v2/woff/p<%= @page_number %>.woff?v=3.1') format('woff');
      font-display: swap;
    }
    
    @font-face {
      font-family: 'p<%= @page_number %>-indopak';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/quran_fonts/indopak/woff2/p<%= @page_number %>.woff2?v=3.1') format('woff2');
      font-display: swap;
    }

    @font-face {
      font-family: 'bismillah';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/bismillah/bismillah.woff2?v=3.3') format('woff2');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: 'surah-names-v4';
      src: url('https://static-cdn.tarteel.ai/qul/fonts/surah-names/v4/surah-name-v4.ttf?v=3.3') format('truetype');
      font-display: swap;
    }

    @font-face {
      font-family: quran-icon;
      src: url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.woff2?v=3.3"),
      url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.woff?v=3.3") format("woff"),
      url("https://static-cdn.tarteel.ai/qul/fonts/common/quran-common.ttf?v=3.3") format("truetype");
    }

    /* Base styles */
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
      direction: rtl;
    }
    
    .mushaf {
      background: white;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    
    /* Font application based on mushaf type */
    /* Font application based on mushaf type */
    .mushaf.qpc_v1 .page { font-family: 'p<%= @page_number %>-v1'; }
    .mushaf.qpc_v2 .page { font-family: 'p<%= @page_number %>-v2'; }
    .mushaf.indopak_nastaleeq_15 .page { font-family: 'p<%= @page_number %>-indopak'; }
    
    .page {
      font-size: 30px;
      line-height: 1.8;
      unicode-bidi: embed;
      letter-spacing: normal;
      word-spacing: normal;
    }

    .page-wrapper {
      display: inline-block;  /* Add this */
      text-align: left;  /* Add this */
    }

    .surah-name {
      position: relative;
      height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .surah-icon {
      font-size: 50px;
      text-align: right;
      direction: rtl;
      font-display: block;
      speak: never;
      font-style: normal;
      font-weight: 400;
      font-variant: normal;
      text-transform: none;
      line-height: 1;
      letter-spacing: 0;
      position: absolute;
      align-items: center;
    }

    .surah-header {
      font-size: 70px;
      margin-top: -30px;
      margin-bottom: -30px;
    }

    .quran-icon {
      font-family: quran-icon;
    }

    .surah-name-v4-icon {
      font-family: surah-names-v4;
    }

    .bismillah {
      font-size: 36px;
      text-align: center;
      font-family: bismillah;
    }

    .text-center {
      text-align: center;
    }

    .position-absolute {
      position: absolute;
    }

    .me-2 {
      margin-right: 0.5rem;
    }
    
    .line-container {
      margin-bottom: 10px;
    }
    
    .line {
      text-align: justify;
      text-align-last: justify;
    }
    
    .line--center {
      text-align: center !important;
      text-align-last: center !important;
    }
    
    .line--surah-name {
      text-align: center;
      font-size: 36px;
      margin: 20px 0;
      color: #2c3e50;
    }
    
    .line--bismillah {
      text-align: center;
      font-size: 32px;

      margin: 15px 0;
    }

    .ayah-container {
      display: inline;
    }

    .ayah {
      display: inline;
    }

    .char {
      display: inline;
      margin: 0;
    }

    .line {
      text-align: justify;
      text-align-last: justify;
      white-space: nowrap;
      word-spacing: normal;
    }
        
    
    .char-end {
      color: #e74c3c;
    }
    
    /* Navigation */
    .navigation {
      text-align: center;
      margin: 20px 0;
    }
    
    .navigation a {
      display: inline-block;
      padding: 10px 20px;
      background: #3498db;
      color: white;
      text-decoration: none;
      margin: 0 5px;
      border-radius: 4px;
    }
    
    .navigation a:hover {
      background: #2980b9;
    }
    
    .surah-ornament {
      font-size: 40px;
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <%= yield %>
</body>
</html>
